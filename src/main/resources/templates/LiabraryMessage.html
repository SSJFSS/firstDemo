<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html  xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script
            src="http://code.jquery.com/jquery-latest.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>图书信息</title>

</head>
<body>
    <h1>录入图书信息</h1>
    <form>
        <strong>书名:</strong>
        <input type="text" name="bookname" id="bookname"/></br>
        </br>

        <strong>出版社:</strong>
        <input type="text" name="bookconcern" id="bookconcern"/></br>
        </br>

        <strong>作者:</strong>
        <input type="text" name="writer" id="writer"/></br>
        </br>

        <strong>数量:</strong>
        <input type="text" name="number" id="number"/></br>
        </br>
        <!-- <strong>Your profile:</strong></br>
         <textarea cols="50" rows="4" name="profile" id="profile"></textarea></br>
         </br>-->
        <!-- <strong>Interests:</strong></br>
         <input type="checkbox" name="development" value="1" checked="checked">Development</br>
         <input type="checkbox" name="design" value="2" >Design</br>
         <input type="checkbox" name="business" value="3" >Business</br>
         </br>-->

        <button type="button" onclick="onClick()">确定</button>
    </form>
</body>
<script type="text/javascript">

         function onClick(){
            var name=$("#bookname").val();
            var concern=$("#bookconcern").val();
            var number=$("#number").val();
            var writer=$("#writer").val();
            var error="";
            if (name.length=="") {
                    error+="书名不能为空";
                    error+="\n";
                   // alert('书名不能为空');

                }
             if (concern.length=="") {
                    error+="出版社不能为空";
                    error+="\n";
                    }
             if (writer.length=="") {
                    error+="作者不能为空";
                    error+="\n";
                    }
             if (number.length=="") {
                    error+="数量不能为空";
                    error+="\n";
                    }
            // if (time.length=="") {
              //      error+="借阅时间不能为空";
             //       error+="\n";
               //     }
             if (error!="") {
                    alert(error);
                    }
             else{
                  /* debugger */
                    $.ajax({
                        type:'POST',
                        /* dataType:'json', */
                        dataType:'json',
                        url:'http://localhost:8080/index/LiabraryMassage/insert',
                        contentType:'application/json;charset=UTF-8',

                        data:JSON.stringify({"bookname":name,"bookconcern":concern,"writer":writer,"number":number}),

                        success:function(data){//返回json结果

                            //username==data.username&amp;&amp;password==data.password
                            //if(name==data.name&amp;&amp;concern==data.concern&amp;&amp;user==data.user&amp;&amp;num==data.num){
                            if(data){
                                alert("录入成功");
                                console("传送数据成功");
                                //JSON.stringify(data)
                               // window.location.href="index.html?username="+data.username;
                                //data.username
                            }
                             else {
                                //debugger;
                                alert("借阅人以及借阅过本书");
                            }
                        }
                    });
                  alert("录入完成");
                    /* console.log({"username":username,"password":password}); */
            }

        }
</script>
</html>